######################
# TensTorrent
######################
export USER_DEV=/proj_sw/user_dev/$USER/
export ROOT="$USER_DEV"
export ALL_BAZEL=1
export VCD_NOFPU=1 # disable vcd dump for FPU
export FAST_VERSIM=3 # optimized for runtime
export DEVICE_RUNNER=Silicon
export SKIP_BBE_UPDATE=1

alias -- config-gs='export ARCH_NAME=grayskull'
alias -- config-wh='export ARCH_NAME=wormhole_b0'
alias -- config-bh='export ARCH_NAME=blackhole'

alias -- ird='python3 /proj_sw//tools/interactive-run-docker/interactive-run-docker.py'
alias -- dock='docker exec -it --user tzhou special-tzhou zsh'
alias -- deck='sudo service docker start && sudo chmod 666 /var/run/docker.sock'

dbgon() {
    export CONFIG=debug
    export BACKEND_CONFIG="$CONFIG"
    export PYBUDA_OP_PERF=1
    export TT_BACKEND_PROFILER=1
}

dbgoff() {
    export CONFIG=release
    export BACKEND_CONFIG="$CONFIG"
    unset PYBUDA_OP_PERF
    unset TT_BACKEND_PROFILER
}

rst() {
    if [[ -n "$RESET_CMD" ]]; then
        "$RESET_CMD" "$@"
    else
        echo "\$RESET_CMD command is not set, skipping..."
    fi
}

[[ -f $USER_DEV/ird/interactive-run-docker.py ]] && alias -- ird='python3 $USER_DEV/ird/interactive-run-docker.py'

[[ -v IRD_ARCH_NAME ]] && export ARCH_NAME="$IRD_ARCH_NAME"

if [[ $(pwd) =~ $USER_DEV ]]; then
    dbgon && eval "`ondir /`"
fi
